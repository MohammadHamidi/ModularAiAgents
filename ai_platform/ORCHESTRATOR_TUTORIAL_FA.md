# ğŸ¯ Ø¢Ù…ÙˆØ²Ø´ Ú©Ø§Ù…Ù„: Ø³Ø§Ø®Øª Orchestrator Agent

## ğŸ“š ÙÙ‡Ø±Ø³Øª

1. [Ù…ÙÙ‡ÙˆÙ… Orchestrator](#Ù…ÙÙ‡ÙˆÙ…-orchestrator)
2. [ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡](#ÙØ§ÛŒÙ„Ù‡Ø§ÛŒ-Ø§ÛŒØ¬Ø§Ø¯-Ø´Ø¯Ù‡)
3. [Ù…Ø±Ø§Ø­Ù„ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ](#Ù…Ø±Ø§Ø­Ù„-Ù¾ÛŒØ§Ø¯Ù‡Ø³Ø§Ø²ÛŒ)
4. [ØªØ³Øª Ùˆ Ø§Ø¬Ø±Ø§](#ØªØ³Øª-Ùˆ-Ø§Ø¬Ø±Ø§)
5. [Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ](#Ù†Ù…ÙˆÙ†Ù‡Ù‡Ø§ÛŒ-Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ)
6. [Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ](#Ø¹ÛŒØ¨ÛŒØ§Ø¨ÛŒ)

---

## ğŸ­ Ù…ÙÙ‡ÙˆÙ… Orchestrator

### Ú†ÛŒÙ‡ØŸ
Orchestrator ÛŒÚ© Ø¹Ø§Ù…Ù„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù‡Ù…Ø§Ù‡Ù†Ú¯â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø§Ø³Øª Ú©Ù‡:
- Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ **ØªØ­Ù„ÛŒÙ„** Ù…ÛŒâ€ŒÚ©Ù†Ù‡
- ØªØ´Ø®ÛŒØµ Ù…ÛŒØ¯Ù‡ Ú©Ø¯ÙˆÙ… Ù…ØªØ®ØµØµ Ø¨Ø§ÛŒØ¯ Ø¬ÙˆØ§Ø¨ Ø¨Ø¯Ù‡
- **Ø®ÙˆØ¯Ú©Ø§Ø±** Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ùˆ Ø¨Ù‡ Ù…ØªØ®ØµØµ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø±Ø¬Ø§Ø¹ Ù…ÛŒØ¯Ù‡
- Ù¾Ø§Ø³Ø® Ù…ØªØ®ØµØµ Ø±Ùˆ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯ÙˆÙ†Ù‡

### Ú†Ø±Ø§ Ù…ÙÛŒØ¯Ù‡ØŸ
âœ… Ú©Ø§Ø±Ø¨Ø± Ù†ÛŒØ§Ø²ÛŒ Ù†Ø¯Ø§Ø±Ù‡ Ø¨Ø¯ÙˆÙ†Ù‡ Ú©Ø¯ÙˆÙ… Agent Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†Ù‡
âœ… Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ùˆ Ø®ÙˆØ¯Ú©Ø§Ø±
âœ… ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨Ù‡ØªØ±
âœ… ÛŒÚ© Ù†Ù‚Ø·Ù‡ ÙˆØ±ÙˆØ¯ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§

### Ù…Ø¹Ù…Ø§Ø±ÛŒ:

```
                    Ú©Ø§Ø±Ø¨Ø±
                      â†“
              [Orchestrator Agent]
               (ØªØ­Ù„ÛŒÙ„ Ùˆ ØªØµÙ…ÛŒÙ…)
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“             â†“             â†“
    [Doctor]      [Tutor]      [Default]
    Ù¾Ø²Ø´Ú©ÛŒ         Ø¢Ù…ÙˆØ²Ø´ÛŒ        Ø¹Ù…ÙˆÙ…ÛŒ
```

---

## ğŸ“ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡

Ù…Ù† Ø¨Ø±Ø§Øª Ø§ÛŒÙ† ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ùˆ Ø³Ø§Ø®ØªÙ…:

### 1. **Config ÙØ§ÛŒÙ„ Orchestrator**
```
ai_platform/services/chat-service/config/personalities/orchestrator.yaml
```
Ø´Ø§Ù…Ù„:
- System prompt Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
- Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ
- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø¯Ù„ (temperature: 0.3 Ø¨Ø±Ø§ÛŒ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø«Ø§Ø¨Øª)

### 2. **Ø§Ø¨Ø²Ø§Ø± Routing**
```
ai_platform/services/chat-service/tools/agent_router.py
```
Ø´Ø§Ù…Ù„:
- `AgentRouterTool`: Ø§Ø¨Ø²Ø§Ø± Ø§ØµÙ„ÛŒ Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ
- `AgentRouterToolSync`: Ù†Ø³Ø®Ù‡ Ø³ÛŒÙ†Ú© Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ pydantic-ai

### 3. **Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ**
```
ai_platform/ORCHESTRATOR_SETUP.md
```
Ù…Ø³ØªÙ†Ø¯Ø§Øª Ú©Ø§Ù…Ù„ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ

### 4. **Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø¯ Ú©Ø§Ù…Ù„**
```
ai_platform/orchestrator_integration_example.py
```
Ú©Ø¯ Ø¯Ù‚ÛŒÙ‚ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± main.py

### 5. **Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªØ³Øª**
```
ai_platform/test_orchestrator.py
```
ØªØ³Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ

---

## ğŸ› ï¸ Ù…Ø±Ø§Ø­Ù„ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ

### Ù‚Ø¯Ù… 1: Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡

Ù‡Ù…Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø¢Ù…Ø§Ø¯Ù‡ Ù‡Ø³ØªÙ†Ø¯! ÙÙ‚Ø· Ø¨Ø§ÛŒØ¯ `main.py` Ø±Ùˆ ØªØºÛŒÛŒØ± Ø¨Ø¯ÛŒ.

### Ù‚Ø¯Ù… 2: ØªØºÛŒÛŒØ± main.py

Ø¨Ø§Ø² Ú©Ù†:
```
ai_platform/services/chat-service/main.py
```

#### 2.1: Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Import

Ø¯Ø± Ø®Ø· ~29 (Ø¨Ø¹Ø¯ Ø§Ø² import Ù‡Ø§ÛŒ tools):
```python
from tools.agent_router import AgentRouterToolSync
```

#### 2.2: Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ù„Ø§Ø³ Wrapper

Ù‚Ø¨Ù„ Ø§Ø² `@app.on_event("startup")` (Ø­Ø¯ÙˆØ¯ Ø®Ø· 180):
```python
class RouterToolWrapper:
    """Wrapper to make routing tool compatible with Tool interface"""

    def __init__(self, router):
        self.router = router
        self._enabled = True

    @property
    def name(self) -> str:
        return "route_to_agent"

    @property
    def description(self) -> str:
        return self.router.description

    @property
    def enabled(self) -> bool:
        return self._enabled

    @property
    def parameters(self) -> dict:
        return {
            "type": "object",
            "properties": {
                "agent_key": {
                    "type": "string",
                    "description": "Specialist agent key",
                    "enum": ["doctor", "tutor", "professional", "default", "minimal"]
                },
                "user_message": {
                    "type": "string",
                    "description": "User's message to forward"
                }
            },
            "required": ["agent_key", "user_message"]
        }

    async def execute(self, agent_key: str, user_message: str, session_id: str = None) -> str:
        return self.router.run(agent_key, user_message, session_id)
```

#### 2.3: ØªØºÛŒÛŒØ± Startup Function

Ù¾ÛŒØ¯Ø§ Ú©Ù† Ø§ÛŒÙ† Ø®Ø· (Ø­Ø¯ÙˆØ¯ 261):
```python
persona_configs = {
    "default": "agent_config.yaml",
    "tutor": "personalities/friendly_tutor.yaml",
    "professional": "personalities/professional_assistant.yaml",
    "minimal": "personalities/minimal_assistant.yaml",
}
```

ØªØ¨Ø¯ÛŒÙ„ Ú©Ù† Ø¨Ù‡:
```python
persona_configs = {
    "default": "agent_config.yaml",
    "tutor": "personalities/friendly_tutor.yaml",
    "professional": "personalities/professional_assistant.yaml",
    "minimal": "personalities/minimal_assistant.yaml",
    "orchestrator": "personalities/orchestrator.yaml",  # âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯
}
```

#### 2.4: ØªØºÛŒÛŒØ± Ø­Ù„Ù‚Ù‡ Ø«Ø¨Øª Agents

Ú©Ù„ Ø­Ù„Ù‚Ù‡ `for agent_key, config_path in persona_configs.items():` Ø±Ùˆ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù† Ø¨Ø§ Ú©Ø¯ ØªÙˆ ÙØ§ÛŒÙ„:
```
orchestrator_integration_example.py
```

ÛŒØ§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®Ù„Ø§ØµÙ‡:

```python
# PASS 1: Ø«Ø¨Øª Agents ØªØ®ØµØµÛŒ (Ø¨Ø¯ÙˆÙ† orchestrator)
for agent_key, config_path in persona_configs.items():
    if agent_key == "orchestrator":  # Ø±Ø¯ Ú©Ù†
        continue

    # ... Ú©Ø¯ Ø«Ø¨Øª agent Ù…Ø¹Ù…ÙˆÙ„ÛŒ ...
    AGENTS[agent_key] = agent
    AGENT_CONFIGS[agent_key] = persona_config

# PASS 2: Ø«Ø¨Øª Orchestrator Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø± routing
if "orchestrator" in persona_configs:
    # Ø³Ø§Ø®Øª Ø§Ø¨Ø²Ø§Ø± routing
    routing_tool_core = AgentRouterToolSync(AGENTS, context_manager)
    routing_tool = RouterToolWrapper(routing_tool_core)

    # Ø«Ø¨Øª orchestrator Ø¨Ø§ Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø±
    orchestrator_agent = ChatAgent(
        orchestrator_agent_config,
        context_manager,
        orchestrator_persona_config,
        custom_tools=[routing_tool]
    )

    await orchestrator_agent.initialize(http_client)
    AGENTS["orchestrator"] = orchestrator_agent
```

**Ù…Ù‡Ù…**: Ú©Ø¯ Ú©Ø§Ù…Ù„ Ø±Ùˆ Ø§Ø² `orchestrator_integration_example.py` Ú©Ù¾ÛŒ Ú©Ù†!

---

## ğŸ§ª ØªØ³Øª Ùˆ Ø§Ø¬Ø±Ø§

### Ù‚Ø¯Ù… 1: Build Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

```bash
cd ai_platform
docker-compose down
docker-compose up -d --build
```

### Ù‚Ø¯Ù… 2: Ú†Ú© Ú©Ø±Ø¯Ù† Ù„Ø§Ú¯â€ŒÙ‡Ø§

```bash
docker-compose logs -f chat-service
```

Ø¨Ø§ÛŒØ¯ Ø¨Ø¨ÛŒÙ†ÛŒ:
```
âœ… Registered 'default': Default Chat Agent with 3 tools
âœ… Registered 'tutor': Friendly Tutor with 3 tools
âœ… Registered 'professional': Professional Assistant with 4 tools
âœ… Registered 'minimal': Minimal Assistant with 0 tools
âœ… Registered orchestrator with routing to 4 specialists
```

### Ù‚Ø¯Ù… 3: ØªØ³Øª Ø¯Ø³ØªÛŒ

#### ØªØ³Øª 1: Ù¾Ø²Ø´Ú©ÛŒ (Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ doctor Ø¨Ø±ÙˆØ¯)
```bash
curl -X POST http://localhost:8000/chat/orchestrator \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Ø³Ù„Ø§Ù…ØŒ Ø³Ø±Ø¯Ø±Ø¯ Ø¯Ø§Ø±Ù… Ùˆ ØªØ¨ Ú©Ø±Ø¯Ù…",
    "session_id": null
  }'
```

#### ØªØ³Øª 2: Ø¢Ù…ÙˆØ²Ø´ÛŒ (Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ tutor Ø¨Ø±ÙˆØ¯)
```bash
curl -X POST http://localhost:8000/chat/orchestrator \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Ù…ÛŒâ€ŒØ®ÙˆØ§Ù… Ø±ÛŒØ§Ø¶ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±Ù…",
    "session_id": null
  }'
```

#### ØªØ³Øª 3: Ù‚Ø±Ø¢Ù†ÛŒ (Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ default Ø¨Ø±ÙˆØ¯)
```bash
curl -X POST http://localhost:8000/chat/orchestrator \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø¢ÛŒÙ‡ 12 Ø¨Ú¯Ùˆ",
    "session_id": null
  }'
```

### Ù‚Ø¯Ù… 4: ØªØ³Øª Ø®ÙˆØ¯Ú©Ø§Ø±

```bash
cd ai_platform
python test_orchestrator.py
```

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:
- âœ… 9 Ø³Ù†Ø§Ø±ÛŒÙˆ Ù…Ø®ØªÙ„Ù Ø±Ùˆ ØªØ³Øª Ù…ÛŒâ€ŒÚ©Ù†Ù‡
- âœ… Ú†Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù‡ routing Ø¯Ø±Ø³Øª Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡
- âœ… Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ù…Ù„ Ù…ÛŒØ¯Ù‡

---

## ğŸ’¡ Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ

### Ù…Ø«Ø§Ù„ 1: Ú©Ø§Ø±Ø¨Ø± Ù†Ù…ÛŒâ€ŒØ¯ÙˆÙ†Ù‡ Ú©Ø¬Ø§ Ø¨Ø±Ù‡

**Ù‚Ø¨Ù„ Ø§Ø² Orchestrator:**
```
Ú©Ø§Ø±Ø¨Ø±: "Ø³Ø±Ø¯Ø±Ø¯ Ø¯Ø§Ø±Ù…" â†’ Ø¨Ù‡ Ú©Ø¯ÙˆÙ… agent Ø¨ÙØ±Ø³ØªÙ…ØŸ ğŸ¤”
â†’ Ø§Ø´ØªØ¨Ø§Ù‡ÛŒ Ø¨Ù‡ tutor Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ‡
â†’ tutor Ø¬ÙˆØ§Ø¨ Ù†Ø§Ù…Ø±ØªØ¨Ø· Ù…ÛŒØ¯Ù‡ âŒ
```

**Ø¨Ø§ Orchestrator:**
```
Ú©Ø§Ø±Ø¨Ø±: "Ø³Ø±Ø¯Ø±Ø¯ Ø¯Ø§Ø±Ù…" â†’ Ø¨Ù‡ orchestrator Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ‡
â†’ Orchestrator ØªØ´Ø®ÛŒØµ Ù…ÛŒØ¯Ù‡: Ù…ÙˆØ¶ÙˆØ¹ Ù¾Ø²Ø´Ú©ÛŒ
â†’ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ doctor Ø§Ø±Ø¬Ø§Ø¹ Ù…ÛŒØ¯Ù‡
â†’ Doctor Ø¬ÙˆØ§Ø¨ ØµØ­ÛŒØ­ Ù…ÛŒØ¯Ù‡ âœ…
```

### Ù…Ø«Ø§Ù„ 2: Ù…Ú©Ø§Ù„Ù…Ù‡ Ù¾ÛŒÙˆØ³ØªÙ‡

```
Ú©Ø§Ø±Ø¨Ø±: "Ø³Ù„Ø§Ù…ØŒ Ù…Ù† Ø¹Ù„ÛŒ Ù‡Ø³ØªÙ…"
Orchestrator â†’ Default Agent
Ù¾Ø§Ø³Ø®: "Ø³Ù„Ø§Ù… Ø¹Ù„ÛŒ! Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ú©Ù…Ú©Øª Ú©Ù†Ù…ØŸ"

Ú©Ø§Ø±Ø¨Ø±: "Ø³Ø±Ø¯Ø±Ø¯ Ø¯Ø§Ø±Ù…"
Orchestrator â†’ Doctor Agent
Ù¾Ø§Ø³Ø®: "Ø³Ù„Ø§Ù… Ø¹Ù„ÛŒ! Ø®ÙˆØ¨ØŒ Ø¨Ø°Ø§Ø± Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø³Ø±Ø¯Ø±Ø¯Øª ØµØ­Ø¨Øª Ú©Ù†ÛŒÙ…..."
                â†‘
            Ø§Ø³Ù… Ø±Ùˆ ÛŒØ§Ø¯Ø´ Ù…ÙˆÙ†Ø¯!
```

### Ù…Ø«Ø§Ù„ 3: Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù…Ø®ØªÙ„Ù Ø¯Ø± ÛŒÚ© session

```bash
# Ù¾ÛŒØ§Ù… 1: Ù…Ø°Ù‡Ø¨ÛŒ
POST /chat/orchestrator
{"message": "Ø¢ÛŒÙ‡ 12 Ú†ÛŒÙ‡ØŸ"}
â†’ Routes to: default

# Ù¾ÛŒØ§Ù… 2: Ù¾Ø²Ø´Ú©ÛŒ (Ù‡Ù…ÙˆÙ† session)
POST /chat/orchestrator
{"message": "Ø³Ø±Ø¯Ø±Ø¯ Ø¯Ø§Ø±Ù…", "session_id": "..."}
â†’ Routes to: doctor

# Ù¾ÛŒØ§Ù… 3: Ø¢Ù…ÙˆØ²Ø´ÛŒ (Ù‡Ù…ÙˆÙ† session)
POST /chat/orchestrator
{"message": "Ø±ÛŒØ§Ø¶ÛŒ ÛŒØ§Ø¯ Ø¨Ø¯Ù‡", "session_id": "..."}
â†’ Routes to: tutor
```

Ù‡Ù…Ù‡ Ø¯Ø± ÛŒÚ© Ú¯ÙØªÚ¯Ùˆ! ğŸ‰

---

## ğŸ” Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„ 1: Orchestrator Ø«Ø¨Øª Ù†Ù…ÛŒØ´Ù‡

**Ø¹Ù„Ø§Ù…Øª:**
```
âŒ Failed to load orchestrator: ...
```

**Ø±Ø§Ù‡â€ŒØ­Ù„:**
1. Ú†Ú© Ú©Ù† ÙØ§ÛŒÙ„ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù‡:
   ```bash
   ls -la ai_platform/services/chat-service/config/personalities/orchestrator.yaml
   ```

2. Ú†Ú© Ú©Ù† import Ø¯Ø±Ø³ØªÙ‡:
   ```bash
   docker-compose logs chat-service | grep "import"
   ```

### Ù…Ø´Ú©Ù„ 2: routing_tool Ù¾ÛŒØ¯Ø§ Ù†Ù…ÛŒØ´Ù‡

**Ø¹Ù„Ø§Ù…Øª:**
```
NameError: name 'AgentRouterToolSync' is not defined
```

**Ø±Ø§Ù‡â€ŒØ­Ù„:**
1. Ù…Ø·Ù…Ø¦Ù† Ø´Ùˆ import Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡:
   ```python
   from tools.agent_router import AgentRouterToolSync
   ```

2. Ú†Ú© Ú©Ù† ÙØ§ÛŒÙ„ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù‡:
   ```bash
   ls -la ai_platform/services/chat-service/tools/agent_router.py
   ```

### Ù…Ø´Ú©Ù„ 3: Routing Ø§Ø´ØªØ¨Ø§Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡

**Ø¹Ù„Ø§Ù…Øª:**
Ù¾ÛŒØ§Ù… Ù¾Ø²Ø´Ú©ÛŒ Ø¨Ù‡ tutor Ù…ÛŒØ±Ù‡!

**Ø±Ø§Ù‡â€ŒØ­Ù„:**
1. Ú†Ú© Ú©Ù† system prompt Ø¯Ø± `orchestrator.yaml`:
   ```yaml
   system_prompt: |
     # ... Ù‚ÙˆØ§Ù†ÛŒÙ† routing ...
   ```

2. Temperature Ø±Ùˆ Ú©Ù… Ú©Ù†:
   ```yaml
   model_config:
     temperature: 0.2  # Ø§Ø² 0.3 Ú©Ù…ØªØ± Ú©Ù†
   ```

3. Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ø¨ÛŒØ´ØªØ± Ø§Ø¶Ø§ÙÙ‡ Ú©Ù† Ø¯Ø± system prompt

### Ù…Ø´Ú©Ù„ 4: Context Ø­ÙØ¸ Ù†Ù…ÛŒØ´Ù‡

**Ø¹Ù„Ø§Ù…Øª:**
Agent Ø§Ø³Ù… Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ ÙØ±Ø§Ù…ÙˆØ´ Ù…ÛŒâ€ŒÚ©Ù†Ù‡

**Ø±Ø§Ù‡â€ŒØ­Ù„:**
Ù…Ø·Ù…Ø¦Ù† Ø´Ùˆ `use_shared_context: true` Ø¯Ø± request:
```python
{
    "message": "...",
    "session_id": "...",
    "use_shared_context": true  # âœ… Ø§ÛŒÙ† Ø±Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†
}
```

---

## ğŸ“ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø¨ÛŒØ´ØªØ±

### Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡

Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ù‚ÙˆØ§Ù†ÛŒÙ† routing Ø±Ùˆ Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØªØ± Ú©Ù†ÛŒ:

```yaml
# Ø¯Ø± orchestrator.yaml
system_prompt: |
  ğŸ” Advanced Routing:

  1. Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ§Ø±ÛŒØ®Ú†Ù‡:
     - Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ø¨Ø§ doctor ØµØ­Ø¨Øª Ú©Ø±Ø¯Ù‡ â†’ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø§ doctor
     - Ø§Ú¯Ø± Ø¯Ø± Ø­Ø§Ù„ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ â†’ tutor

  2. Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ø­Ø³Ø§Ø³Ø§Øª:
     - Ù¾ÛŒØ§Ù… Ø¹ØµØ¨Ø§Ù†ÛŒ â†’ professional (Ø±Ø³Ù…ÛŒâ€ŒØªØ±)
     - Ù¾ÛŒØ§Ù… Ø´Ø§Ø¯ â†’ tutor (Ú¯Ø±Ù…â€ŒØªØ±)

  3. Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ±Ø¬ÛŒØ­Ø§Øª:
     - Ø§Ú¯Ø± user.preferred_agent ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡ â†’ Ù‡Ù…ÙˆÙ†

  4. Ú†Ù†Ø¯ Ù…ÙˆØ¶ÙˆØ¹ÛŒ:
     - Ø§Ú¯Ø± Ù¾ÛŒØ§Ù… Ø´Ø§Ù…Ù„ Ú†Ù†Ø¯ Ù…ÙˆØ¶ÙˆØ¹ â†’ Ø¨Ù¾Ø±Ø³ Ú©Ø¯ÙˆÙ… Ø§ÙˆÙ„ÙˆÛŒØª Ø¯Ø§Ø±Ù‡
```

### Routing Ø¨Ø§ ML

Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡â€ŒØªØ±:
1. Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ routing
2. Ø³Ø§Ø®Øª Ù…Ø¯Ù„ ML Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ù…ÙˆØ¶ÙˆØ¹
3. ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¯Ù„ Ø¨Ù‡ Ø¬Ø§ÛŒ prompt-based routing

---

## ğŸ“Š Ø®Ù„Ø§ØµÙ‡

### Ú†ÛŒ Ø³Ø§Ø®ØªÛŒÙ…ØŸ
âœ… Orchestrator Agent Ú©Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù‡
âœ… Routing Tool Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨ÛŒÙ† agents
âœ… Ø³ÛŒØ³ØªÙ… ØªØ³Øª Ú©Ø§Ù…Ù„
âœ… Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¬Ø§Ù…Ø¹

### Ù…Ø²Ø§ÛŒØ§:
âœ¨ UX Ø¨Ù‡ØªØ±: Ú©Ø§Ø±Ø¨Ø± Ù†Ù…ÛŒâ€ŒØ¯ÙˆÙ†Ù‡ Ú©Ø¯ÙˆÙ… agent Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†Ù‡
âœ¨ Scalable: Ø±Ø§Ø­Øª Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ agent Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒ
âœ¨ Maintainable: ØªÙ…Ø§Ù… Ù…Ù†Ø·Ù‚ routing Ø¯Ø± ÛŒÙ‡ Ø¬Ø§
âœ¨ Flexible: Ù‡Ù†ÙˆØ² Ù…ÛŒØ´Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø§ agents Ú©Ø§Ø± Ú©Ø±Ø¯

### Ù…Ø±Ø§Ø­Ù„ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ:
1. âœ… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù†
2. ğŸ”§ main.py Ø±Ùˆ ØªØºÛŒÛŒØ± Ø¨Ø¯Ù‡ (Ú©Ù¾ÛŒ Ø§Ø² orchestrator_integration_example.py)
3. ğŸš€ rebuild Ùˆ restart Ú©Ù†
4. ğŸ§ª ØªØ³Øª Ú©Ù† Ø¨Ø§ test_orchestrator.py
5. ğŸ‰ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†!

---

**Ù…ÙˆÙÙ‚ Ø¨Ø§Ø´ÛŒ! ğŸš€**

Ø³ÙˆØ§Ù„ÛŒ Ø¯Ø§Ø´ØªÛŒ Ø¨Ù¾Ø±Ø³!
